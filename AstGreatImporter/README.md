# Ast Great Importer

## Why Ast Great Importer ?

In the original project of phpjoern, it is recommended to use the neo4j 2.x version, because the csv file exported by phpjoern can be convert to graph.db ,which is the binary data file for neo4j,  via batch-importer conveniently . In addition, the neo4j 2.x version boosts its great support for the Gremlin language in the Apache TinkerPop2 framework.  Most paper also use Gremlin+pythonApi as the main language for program analysis as well.

Unfortunately, the format of `graph.db` file generated by batch-importer is no longer supported by the higher version of neo4j. And TinkPop has also launched the third-generation framework. At the same time, neo4j has launched a new neo4j-admin import tool to support the transaction of importing large quantities of data.

The purpose of this project is to convert `TSV` files generated by `joern/phpjoern` into files that can be directly loaded with `neo4j-admin import` to support more program analysis work.Otherwise, the tool may also fix some string parsing errors caused by encoding issues.
 
 After all, not every programmer wants to use old antiques ten years ago for program analysis.

## Usage 

```shell script
./phpjoern/php2ast $dirname
./joern/phpast2cpg nodes.csv rels.csv
python base.py nodes.csv rels.csv cpg_edges.csv
# your neo4j path
./neo4j-community-4.2.1/bin/neo4j-admin import \
--nodes=nodes.csv \
--relationships=rels.csv \
--relationships=cpg_edges.csv \
--trim-strings=true \
--skip-duplicate-nodes=true \
--skip-bad-relationships=true
```
